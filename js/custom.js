function loadData(){request=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),request.open("GET","data.json"),request.onreadystatechange=function(){if(200===request.status&&4===request.readyState){info=JSON.parse(request.responseText);for(var a=0;a<info.length;a++)locations.push(info[a]),info[a].canRent&&canRent.push(info[a]),info[a].canReturn&&canReturn.push(info[a]);initMap()}},request.send()}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:40.7413549,lng:-73.9980244},zoom:14,styles:styles,mapTypeControl:!1}),setMarkers(map),hasBattery()}function setMarkers(a){for(var b=new google.maps.InfoWindow,c={url:"images/marker.svg",size:new google.maps.Size(24,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12,50)},d={url:"images/marker_ComingUp.svg",size:new google.maps.Size(24,50),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(12,50)},e={coords:[12,0,24,25,12,50,0,25,12,0],type:"poly"},f=0;f<locations.length;f++){var h,g=locations[f];h=g.comingup?new google.maps.Marker({position:{lat:g.location.lat,lng:g.location.lng},icon:d,shape:e,type:g.type,address:g.address,animation:google.maps.Animation.DROP,zIndex:g.zIndex}):new google.maps.Marker({position:{lat:g.location.lat,lng:g.location.lng},icon:c,shape:e,type:g.type,address:g.address,animation:google.maps.Animation.DROP,zIndex:g.zIndex}),h.addListener("click",function(){populateInfoWindow(this,b)}),markers.push(h)}for(var f=0;f<canRent.length;f++){var g=canRent[f],h=new google.maps.Marker({position:{lat:g.location.lat,lng:g.location.lng},icon:c,shape:e,type:g.type,address:g.address,animation:google.maps.Animation.DROP,zIndex:g.zIndex});h.addListener("click",function(){populateInfoWindow(this,b)}),markersHasBattery.push(h)}for(var f=0;f<canReturn.length;f++){var g=canReturn[f],h=new google.maps.Marker({position:{lat:g.location.lat,lng:g.location.lng},icon:c,shape:e,type:g.type,address:g.address,animation:google.maps.Animation.DROP,zIndex:g.zIndex});h.addListener("click",function(){populateInfoWindow(this,b)}),markersReturnBattery.push(h)}}function populateInfoWindow(a,b){b.open(map,a),b.marker!=a&&(b.marker=a,b.setContent("<div>"+a.type+"<div>"),b.open(map,a),b.addListener("closeclick",function(){b.close()}))}function showListings(){hideListings();for(var a=new google.maps.LatLngBounds,b=0;b<markers.length;b++)markers[b].setMap(map),a.extend(markers[b].position);map.fitBounds(a),document.getElementById("inputbox").value="",document.getElementById("inputbox").placeholder="address/zipcode",$(".ctrl").removeClass("selected"),$(".ctrl:eq(2)").addClass("selected")}function hideListings(){for(var a=0;a<markers.length;a++)markers[a].setMap(null);for(var a=0;a<markersHasBattery.length;a++)markersHasBattery[a].setMap(null);for(var a=0;a<markersReturnBattery.length;a++)markersReturnBattery[a].setMap(null)}function hasBattery(){hideListings();for(var a=new google.maps.LatLngBounds,b=0;b<markersHasBattery.length;b++)markersHasBattery[b].setMap(map),a.extend(markersHasBattery[b].position);map.fitBounds(a),document.getElementById("inputbox").value="",document.getElementById("inputbox").placeholder="address/zipcode",$(".ctrl").removeClass("selected"),$(".ctrl:first").addClass("selected")}function returnBattery(){hideListings();for(var a=new google.maps.LatLngBounds,b=0;b<markersReturnBattery.length;b++)markersReturnBattery[b].setMap(map),a.extend(markersReturnBattery[b].position);map.fitBounds(a),document.getElementById("inputbox").value="",document.getElementById("inputbox").placeholder="address/zipcode",$(".ctrl").removeClass("selected"),$(".ctrl:eq(1)").addClass("selected")}function presentMarker(a){location.href="#locator",hideListings();for(var b="address"+a,c=document.getElementById(b).innerHTML,d=new google.maps.LatLngBounds,e=0;e<markers.length;e++)if(markers[e].address==c){markers[e].setMap(map),d.extend(markers[e].position);break}map.fitBounds(d),map.setZoom(14)}function blurFunc(){"no results found"!=document.getElementById("inputbox").placeholder&&(document.getElementById("inputbox").placeholder="address/zipcode")}$(window).load(function(){$(".preloader").fadeOut(1e3)}),jQuery(document).ready(function(a){a(window).scroll(function(){a(".navbar").offset().top>50?a(".navbar-fixed-top").addClass("top-nav-collapse"):a(".navbar-fixed-top").removeClass("top-nav-collapse")}),a("#submit").click(function(){a.post("../submit.php",{name:a("#inputName").val(),email:a("#inputEmail").val(),message:a("#inputMessage").val()},function(b){a("#result").html(b)})}),a("#myVideo").on("hidden.bs.modal",function(b){a("#myVideo video").attr("src",a("#myVideo video").attr("src"))}),a(function(){wow=new WOW({mobile:!1}),wow.init(),a(".navbar-collapse a").click(function(){a(".navbar-collapse").collapse("hide")}),a("#home").backstretch(["images/home-bg-slideshow6.jpg","images/home-bg-slideshow4.jpg","images/home-bg-slideshow5.jpg","images/home-bg-slideshow8.jpg"],{duration:2e3,fade:750}),a("#inputbox").on("click",function(){""!=this.placeholder&&(this.placeholder="")})})});var request,map,locations=[],canRent=[],canReturn=[],markers=[],markersHasBattery=[],markersReturnBattery=[],info,styles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]}],myApp=angular.module("myApp",[]);myApp.controller("MyController",["$scope","$http",function(a,b){b.get("../data.json").success(function(b){a.hubLocs=b}),a.startSearch=function(b){var d,c=b.which||b.keycode,e=[];if("13"==c){if(""==document.getElementById("inputbox").value)return hasBattery(),$(".ctrl").removeClass("selected"),void $(".ctrl:first").addClass("selected");d=a.filteredHubs;for(var f=0;f<d.length;f++)for(var g=0;g<markers.length;g++)d[f].address==markers[g].address&&e.push(markers[g]);if(hideListings(),d.length>0){for(var h=new google.maps.LatLngBounds,f=0;f<e.length;f++)e[f].setMap(map),h.extend(e[f].position);map.fitBounds(h),1==d.length?map.setZoom(14):map.setZoom(12)}else document.getElementById("inputbox").value="",document.getElementById("inputbox").placeholder="no results found",$(".ctrl").removeClass("selected"),document.getElementById("inputbox").blur()}}}]);